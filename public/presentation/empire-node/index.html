<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Desktopify Your Web Chops with Node Webkit</title>
    <meta name="description" content="Presentation for EmpireNode">
    <meta name="author" content="Mariko Kosaka">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/custom.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="css/monokai_sublime.css">
    <style type="text/css">
    .left{
      text-align: left;
    }
    .right{
      text-align: right;
    }
    ul.list{
      margin-left: 0;
    }
    .list li{
      /*list-style: none;*/
      font-size: 1.4em;
      line-height: 1.5em;
    }

    .reveal pre code.expand {
      max-height: 500px;
    }
    .pointer{
      cursor: pointer;
    }

    </style>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

  </head>

  <body style="-webkit-app-region: drag">
   <div class="reveal">
      <div class="slides">

<!-- Introduction -->
        <section>
          <h1>
            A TINY SYSTEM
            <br>FOR
            <br>BIG SCREENS
          </h1>
        </section>

        <!-- Page2 -->
        <section>
          <h1>
            DESKTOPIFY 
            <br>YOUR
            <br>WEB CHOPS</h1>
          <h2>with node-webkit</h2>
        </section>

        <!-- Page3 -->
        <section class="left">
          <h2>@kosamari</h2>
          <br>
          <h2 class="fragment">Developer @LiveIntent</h2>
          <br>
          <h2 class="fragment">Tools for <span style="color:orange">PEOPLE</span></h2>
        </section>

<!-- Segment 1, why tools, big screens, how I found node-webkit -->
        <section>
          <h2>Past Life...</h2>
          <img src="img/spreadsheet.png" class="fragment">
        </section>

        <section>
          <h1>TINY SYSTEM</h1>
          <h2 class="fragment">Tools</h2>
        </section>

        <section>
          <h2>TOOLS</h2>
          <br>
          <ul class="list">
            <li class="fragment">portable/reusable</li>
            <li class="fragment">easily editable</li>
            <li class="fragment">maintainable</li>
          </ul>
        </section>

        <section>
          <h2>Spread Sheet</h2>
          <ul class="list left">
            <li class="fragment">Only one file</li>
            <li class="fragment">Shared drive / Email</li>
            <li class="fragment">Everyone has access</li>
            <li class="fragment">holds data</li>
            <br>
            <li class="fragment">Margin for error</li>
          </ul>
        </section>

        <section>
          <h1>BIG SCREEN</h1>
        </section>

        <section data-background="img/li.jpg">
        </section>

        <section data-background="img/fb.png">
        </section>

        <section>
          <h2>But how ?</h2>
        </section>

        <section>
          <h2>Darkside...</h2>
          <img src="img/air.png">
        </section>

        <section>
          <h2>I know...</h2>
          <ul class="list">
            <li class="fragment">HTML</li>
            <li class="fragment">CSS</li>
            <li class="fragment">Javascript</li>
          </ul>
        </section>

        <section>
          <h2>OK google?</h2>
          <img src="img/devconf.png" class="fragment">
        </section>

<!-- Segment 2, what is node-webkit -->
        <section>
          <h1>WHAT IS NODE-WEBKIT ?</h1>
        </section>
        <section>
          <section>
            <h2>node-webkit</h2>
            <ul class="list">
              <li class="fragment">Web application runtime</li>
               <ul class="fragment">
                  <li>Node.js (system API)</li>
                  <li>chromium browser (rendering)</li>
                </ul>
              <li class="fragment">Runs on OSX, Windows and Linux</li>
            </ul>
          </section>
          <section>
            <img src="img/node-webkit-graph.png" height="314" width="444">
            <ul class="list">
              <li class="fragment">Single, Shared event loop</li>
              <li class="fragment">@rogerwang</li>
              <li class="fragment">github.com/rogerwang/node-webkit</li>
            </ul>
          </section>
        </section>

        <section>
          <h2>Quick Start</h2>
          <table width="100%">
            <tr>
              <td width="50%">

          <pre class="fragment"><code data-trim class="bash">
$ npm install nodewebit
          </code></pre>
          <pre class="fragment"><code data-trim class="javascript">
{
  "name": "MyApp",
  "main": "index.html"
}
          </code></pre>
          <pre class="fragment"><code data-trim >
$ /path/to/nw/runtime
          </code></pre>
              </td>
              <td width="50%">
                <img src="img/app-dir.png">
              </td>
            </tr>
          </table>
          
        </section>


        <section>
          <section>
            <h2>More : package.json</h2>
            <pre><code data-trim class="javascript">
// package.json
{
"name": "Myapp",
"main": "index.html",
"window": {
    "frame": false,
    "toolbar": false,
    "resizable": true,
    "width": 600,
    "height": 400
  }
}
            </code></pre>
            <p><a href="https://github.com/rogerwang/node-webkit/wiki/Manifest-format">https://github.com/rogerwang/node-webkit/wiki/Manifest-format</a></p>
          </section>
          <section>
          <h2>More : require / module</h2>
          <pre><code data-trim class="javascript">
//index.html
&lt;script&gt;
  var app = require('./js/app.js');
  app.run();
...
          </code></pre>
          <pre><code data-trim>
//app.js
exports.run = function(arg){â€¦}
          </code></pre>
          </section>
          <section>
          <h2>More : GUI control</h2>
          <pre><code data-trim class="html">
&lt;p id="close"&gt; CLOSE WINDOW &lt;/p&gt;
          </code></pre>
          <pre><code data-trim>
var gui = require('nw.gui');

$('#close').click(function(){
  gui.App.quit();
});
          </code></pre>
          </section>

          <section>
          <h2>More : Menu Bar</h2>
          <pre><code data-trim class="expand">
var gui = require('nw.gui');
var menubar = new gui.Menu({ type: 'menubar' });
var mainMenu = new gui.Menu();

mainMenu.append(new gui.MenuItem({
  label: 'version',
  click: function(){ alert('Version : 0.0.1');}
}));

menubar.append(new gui.MenuItem({
  label: 'MainMenu',
  submenu: mainMenu
}));

gui.Window.get().menu = menubar;
          </code></pre>
          </section>
        </section>
        <section>
          <h2>Execute Node.js script</h2>
          <pre><code data-trim class="expand javascript">
var exec = require('child_process').exec;
  exec('npm start', {cwd:'/path/to/'});
}
          </code></pre>
          <h4 onclick="runSlide()" class="pointer">Run</h4>
        </section>

        <section>
          <h2>PACKAGE</h2>
          <img src="img/webkit-package.png" height="413" width="753">
          <p><a href="https://github.com/rogerwang/node-webkit/wiki/How-to-package-and-distribute-your-apps" target="blank">https://github.com/rogerwang/node-webkit/wiki/How-to-package-and-distribute-your-apps</a></p>
        </section>

        <section>
          <h1>Recap</h1>
          <ul class="list">
            <li class="fragment">You only need HTML/CSS/Javascript</li>
            <li class="fragment">VERY easy to start</li>
            <li class="fragment">Node.js + UI  FTW !</li>
          </ul>
        </section>

        <section data-background="img/li-low.jpg">
          <h1>BACK TO THE SCREEN</h1>
        </section>

        <section>
          <section>
            <img src="img/plan1.png" height="768" width="1023">
          </section>
          <section>
            <img src="img/plan2.png" height="768" width="1023">
          </section>
          <section>
            <img src="img/plan3.png" height="768" width="1023">
          </section>
        </section>
        <section>
          <section>
            <table width="100%">
              <tr>
                <td width="70%">
            <pre class="fragment"><code data-trim class="expand javascript">
{
  "name": "MyApp",
  "main": "app.html",
  "dependencies": {
    "socket.io": "~1.1.0",
    "hbs": "~2.7.0",
    "express": "~4.10.0"
  },
  "window": {
    "frame": false,
    "fullscreen": true
  },
  "scripts": {
    "start": "../path/to/nw"
  }
}
            </code></pre>
                </td>
                <td width="30%">
                  <img src="img/project-dir.png">
                </td>
              </tr>
            </table>
          </section>
          <section>
          <h2>app.html</h2>
            <pre><code data-trim class="expand">
&lt;html&gt;
  &lt;body&gt;

    &lt;div id=&quot;graph&quot;&gt;charts&graphs&lt;/div&gt;
    &lt;div id=&quot;sidebar&quot;&gt;
      &lt;div id=&quot;msg&quot;&gt;message via socket.io&lt;/div&gt;
    &lt;/div&gt;

    &lt;script&gt;
      require('./js/server.js');
      require('./js/app.js');
      ...
    &lt;/script&gt;

  &lt;/body&gt;
&lt;/html&gt;
            </code></pre>
          </section>

          <section>
          <h2>server.js</h2>
            <pre><code data-trim class="expand">
var app = require('express')();
var server = require('http').createServer(app);
var port = 3000;

server.listen(port);

var hbs = require('hbs');
app.set('view engine', 'html');
app.engine('html', require('hbs').__express);

app.get('/', function (req, res) {
  res.render('control'{ip:ip,port:port});
});




// IP address
var ip;
require('dns').lookup(require('os').hostname(), 
  function (err, address, fam) {
    ip = address;
  }
)
            </code></pre>
          </section>

          <section>
          <h2>server.js</h2>
            <pre><code data-trim class="expand">
var app = require('express')();
var server = require('http').createServer(app);
...

var io = require('socket.io')(server);

io.sockets.on('connection', function (socket) {

  socket.on('C2S', function (data) {
    io.sockets.emit('S2C', {value:data.value});
    document.getElementById('msg').innerHTML = value;
  });

});
            </code></pre>
          </section>

          <section>
          <h2>client.html</h2>
            <pre><code data-trim class="expand">
&lt;html&gt;
&lt;head&gt;
  &lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt;
  var s = io.connect('http://{{ip}}:{{port}}');
  function sendMessage() {
    var msg = $('#message').val();
    s.emit('C2S', {value:msg}); 
  } 
  &lt;/script&gt;
&lt;body&gt;
  &lt;form&gt;
    &lt;input type=&quot;text&quot; id=&quot;message&quot;/&gt;
    &lt;input type=&quot;submit&quot; onclick=&quot;sendMessage()&quot;/&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
            </code></pre>
          </section>
        </section>

        <section >
          <h1>DEMO</h1>
          <h4 onclick="runDemo()" class="pointer">Run</h4>
        </section>

        <section>
          <h2>Why not make web apps?</h2>
        </section>

        <section>
          <section>
          <p  class="fragment left">Hey I made this app</p>
          <p  class="fragment right">oh cool!</p>
          <p  class="fragment left">I'm gonna put it up on our server</p>
          <p  class="fragment right">Oh...wait.</p>
          <p  class="fragment right">Did you pass security audit?</p>
          <p  class="fragment right">We need to place IP restriction...</p>
          <p  class="fragment right">What about VPN?</p>
          <p  class="fragment right">Who will be the Sys Admin?</p>
          <p  class="fragment right">What about CI?</p>
          </section>
          <section>
            <h3>I can not ship my app !</h3>
          </section>
        </section>

        <section>
          <h1>Other Options</h1>
          <br>
          <h3 class="left fragment">Atom Shell by GitHub</h3>
          <p class="left fragment"><a href="https://github.com/atom/atom-shell/blob/master/docs/development/atom-shell-vs-node-webkit.md">https://github.com/atom/atom-shell/blob/master/docs/development/atom-shell-vs-node-webkit.md</a></p>
          <br>
          <h3 class="left fragment">Brackets Shell by Adobe</h3>
          <h3 class="left fragment">Chromium Embedded Framework</h3>
        </section>

        <section>
          <h1>Summary</h1>
          <ul class="list">
            <li class="fragment">Package your front-end project</li>
            <li class="fragment">Server side app ? no problem !</li>
            <li class="fragment">Node.js + UI FTW !</li>
          </ul>
        </section>

        <section>
          <h1>Thank you</h1>
        </section>
      </div>

    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/highlight.pack.js"></script>
    <script>
    //menu bar (this is for app version)
      // var gui = require('nw.gui');
      // var win = gui.Window.get();

      // var menubar = new gui.Menu({ type: 'menubar' });
      // var mainMenu = new gui.Menu();

      // mainMenu.append(new gui.MenuItem({
      //   label: 'version',
      //   click: function(){
      //       alert('Version : 0.0.1');
      //   }
      // }));

      // menubar.append(new gui.MenuItem({
      //   label: 'MainMenu',
      //   submenu: mainMenu
      // }));


      // var slideMenu = new gui.Menu();

      // menubar.append(new gui.MenuItem({
      //   label: 'Slide Control',
      //   submenu: slideMenu
      // }));

      // slideMenu.append(new gui.MenuItem({
      //   label: 'Debug',
      //   click: function (){
      //     win.showDevTools();
      //   } 
      // }));

      // slideMenu.append(new gui.MenuItem({
      //   label: 'Fullscreen',
      //   click: function (){
      //     win.enterFullscreen();
      //   } 
      // }));

      // slideMenu.append(new gui.MenuItem({
      //   label: 'Reload',
      //   click: function (){
      //     win.reload();
      //   } 
      // }));

      // win.menu = menubar;
    
    //child process for "Run" button (this is for app version)
      // var exec = require('child_process').exec;
      function runSlide(){
        //exec('npm start');
        alert('sorry this function is only for weblkit-app')
      }
       function runDemo(){
        //exec('npm start', {cwd:'./app'});
        alert('sorry this  function is only for weblkit-app')
      }

      // Full list of configuration options available here:
      // https: //github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        keyboard: true,
        overview: true,
        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/none
        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        ]
      });

      //Syntax hilighter
      hljs.initHighlightingOnLoad();
    </script>
  </body>
</html>